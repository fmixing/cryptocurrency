# Криптовалюта в федеративных системах кворумов

## Обзор

В проекте был адаптирован алгоритм криптовалюты, предложенный в статье R. Guerraoui, P. Kuznetsov, M.Monti, M. Pavlovič, D.-A. Seredinschi, 
[The Consensus Number of a Cryptocurrency](https://arxiv.org/pdf/1906.05574.pdf), под использование в федеративных (асимметричных) системах кворумов.

Этот алгоритм не требует решения задачи консенсуса, или достижения общего согласия, для обеспечения свойств безопасности – отсутствие двойного расходования – и живучести – завершения операций – участникам системы.
Для обеспечения этих свойств в алгоритме используется алгоритм надежного бродкаста, который внутри использует системы кворумов – предположения о корректных и неисправных участниках. 
Авторы статьи рассматривали классические симметричные системы кворумов, когда система кворумов одна на всех участников.

Однако доверие или недоверие не обязательно должно быть симметричны. В таком случае имеет смысл использовать федеративные, или асимметричные системы кворумов.

В работе исследовалась задача криптовалюты в федеративных системах кворумов. 

В проекте реализован алгоритм [бродкаста](./src/main/kotlin/Broadcast.kt) для федеративных систем кворумов, в который был добавлен идентификатор бродкаста. Он не позволяет двум переплетенным процессам одобрить две разные транзакции с одинаковым идентификатором.

И был реализован алгоритм [криптовалюты](./src/main/kotlin/Cryptocurrency.kt), который использует этот бродкаст.

Для эмуляции процессов и надежных каналов, по которым процессы общаются, использовались корутины и каналы из библиотеки [kotlinx.coroutines](https://github.com/Kotlin/kotlinx.coroutines).

В реализованных алгоритмах для удобства делается допущение, что процессы подписывают пересылаемые сообщения подписью так, что подделать эту подпись вычислительно очень сложно.

## Запуск

Для того, чтобы запустить некоторые предложенные сценарии, можно выполнить следующие команды:
* `./gradlew runCorrectScenario` – базовый сценарий, в котором все процессы корректные. Здесь не будет двойного расходования, и всем процессам гарантируется живучесть.

## Тесты

Алгоритмы бродкаста и криптовалюты покрыты [юнит-тестами](./src/test/kotlin). 

В них проверяются ожидаемые свойства этих алгоритмов в случае корректности всех процессов.
И рассматриваются ситуации с вредоносными процессами, которые пытаются обмануть корректные процессы. В тестах проверяется, что процессы ведут себя так, как от них ожидается в таких ситуациях.  
